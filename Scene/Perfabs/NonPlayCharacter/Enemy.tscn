[gd_scene load_steps=24 format=3 uid="uid://dx27klpp0nc4x"]

[ext_resource type="Script" path="res://Script/Perfabs/NonPlayableCharacter/Enemy.gd" id="1_jkjmt"]
[ext_resource type="Texture2D" uid="uid://bcvid2hgflnb" path="res://Assets/Texture/Characters/purple_character.png" id="1_lm6s8"]
[ext_resource type="Theme" uid="uid://dw7ft4xik3rji" path="res://Assets/Theme/Normal.tres" id="2_6wwaj"]
[ext_resource type="Script" path="res://Script/Game/ItemGenerator.gd" id="2_032p5"]
[ext_resource type="Script" path="res://Script/Perfabs/NonPlayableCharacter/EnemyWeapons.gd" id="2_f5php"]
[ext_resource type="Script" path="res://addons/FlowerBuff/Script/FlowerBuffManager.gd" id="2_jei58"]
[ext_resource type="PackedScene" uid="uid://cwrtaokg2sgt6" path="res://Scene/Component/WeaponComponent.tscn" id="3_ufpvg"]
[ext_resource type="Script" path="res://Script/Component/PathfindComponent.gd" id="4_e4v6d"]
[ext_resource type="Script" path="res://Script/Component/ConductorComponent.gd" id="4_wpuqm"]
[ext_resource type="Script" path="res://Script/Component/HealthComponent.gd" id="5_bho0k"]
[ext_resource type="Resource" uid="uid://p3ihvfils2o" path="res://Assets/Resources/Datas/Enemys/NormalEnemy.tres" id="5_iftaj"]
[ext_resource type="Script" path="res://Script/Component/HurtBoxComponent.gd" id="6_sc1tl"]
[ext_resource type="Script" path="res://addons/beehave/blackboard.gd" id="8_6dat1"]
[ext_resource type="Script" path="res://Script/Component/VisionComponent.gd" id="11_vux65"]
[ext_resource type="Script" path="res://Script/Component/AtkRangeComponent.gd" id="12_21xly"]
[ext_resource type="PackedScene" uid="uid://c1g2h8rr2vuds" path="res://Scene/Behavior/NormalEnemyBehavior.tscn" id="14_15x1o"]

[sub_resource type="CircleShape2D" id="CircleShape2D_3mlrj"]
radius = 37.054

[sub_resource type="Animation" id="Animation_w24fo"]
resource_name = "Die"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, -3.49066]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1e-05, 1e-05)]
}

[sub_resource type="Animation" id="Animation_kw3tx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pyvvk"]
_data = {
"Die": SubResource("Animation_w24fo"),
"RESET": SubResource("Animation_kw3tx")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_yxe2u"]
radius = 209.01

[sub_resource type="CircleShape2D" id="CircleShape2D_wll4a"]
radius = 97.1288

[sub_resource type="CircleShape2D" id="CircleShape2D_u6wmr"]
radius = 37.0135

[node name="Enemy" type="CharacterBody2D" groups=["Enemy"]]
script = ExtResource("1_jkjmt")

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_left = 63.0
offset_top = -22.0
offset_right = 63.0
offset_bottom = -22.0
theme = ExtResource("2_6wwaj")
metadata/_edit_use_anchors_ = true

[node name="HpBar" type="ProgressBar" parent="Control"]
unique_name_in_owner = true
custom_minimum_size = Vector2(100, 0)
layout_mode = 1
anchors_preset = -1
offset_top = -44.0
offset_right = -134.0
offset_bottom = -44.0
grow_horizontal = 2
grow_vertical = 2
theme_type_variation = &"HpBar"
show_percentage = false
metadata/_edit_use_anchors_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_3mlrj")

[node name="AtkCDTimer" type="Timer" parent="."]
one_shot = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_pyvvk")
}

[node name="ItemGenerator" type="Node" parent="."]
script = ExtResource("2_032p5")

[node name="ConductorComponent" type="Node" parent="." node_paths=PackedStringArray("blackboard", "buff_manager", "atk_range", "vision", "weapons", "atk_cd_timer")]
script = ExtResource("4_wpuqm")
blackboard = NodePath("../Blackboard")
buff_manager = NodePath("../FlowerBuffManager")
atk_range = NodePath("../AtkRange")
vision = NodePath("../VisionComponent")
weapons = NodePath("../Sprite2D/Weapons")
atk_cd_timer = NodePath("../AtkCDTimer")

[node name="FlowerBuffManager" type="Node" parent="." node_paths=PackedStringArray("target")]
script = ExtResource("2_jei58")
target = NodePath("..")
compute_data = ExtResource("5_iftaj")

[node name="PathFindComponent" type="Node" parent="."]
script = ExtResource("4_e4v6d")

[node name="HealthComponent" type="Node" parent="." node_paths=PackedStringArray("buff_manager")]
script = ExtResource("5_bho0k")
buff_manager = NodePath("../FlowerBuffManager")

[node name="VisionComponent" type="Area2D" parent="." node_paths=PackedStringArray("buff_manager")]
script = ExtResource("11_vux65")
buff_manager = NodePath("../FlowerBuffManager")

[node name="CollisionShape2D" type="CollisionShape2D" parent="VisionComponent"]
shape = SubResource("CircleShape2D_yxe2u")

[node name="AtkRange" type="Area2D" parent="." node_paths=PackedStringArray("buff_manager")]
script = ExtResource("12_21xly")
buff_manager = NodePath("../FlowerBuffManager")

[node name="CollisionShape2D" type="CollisionShape2D" parent="AtkRange"]
shape = SubResource("CircleShape2D_wll4a")

[node name="HurtBoxComponent" type="Area2D" parent="." node_paths=PackedStringArray("health_component")]
script = ExtResource("6_sc1tl")
health_component = NodePath("../HealthComponent")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtBoxComponent"]
shape = SubResource("CircleShape2D_u6wmr")

[node name="NormalEnemyBehavior" parent="." node_paths=PackedStringArray("blackboard") instance=ExtResource("14_15x1o")]
blackboard = NodePath("../Blackboard")

[node name="Blackboard" type="Node" parent="."]
script = ExtResource("8_6dat1")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("1_lm6s8")

[node name="Weapons" type="Node2D" parent="Sprite2D" node_paths=PackedStringArray("atk_cd_timer")]
unique_name_in_owner = true
show_behind_parent = true
script = ExtResource("2_f5php")
atk_cd_timer = NodePath("../../AtkCDTimer")

[node name="WeaponComponent" parent="Sprite2D/Weapons" node_paths=PackedStringArray("buff_manager") instance=ExtResource("3_ufpvg")]
buff_manager = NodePath("../../../FlowerBuffManager")
